import asyncio
from telegram import Update
from telegram.ext import ApplicationBuilder, MessageHandler, ContextTypes, filters
import random
import aiohttp
from telegram import InputFile
from io import BytesIO


BAD_WORDS = ['ุขุดุบุงู', 'ุนูุถ', 'ุจ ูุงููุณ', 'ุฌุงฺฉุด', "ฺฉุณฺฉุด", "ุฎุงุฑฺฉุณุฏู", "ฺฉูู", "ฺฉููุฏู", "ฺฉุณุฏู", "ุฌูุฏู", "ูุงุฏุฑ ุฌูุฏู", "ูุงุฏุฑ ุฎุฑุงุจ", "ุฏูุซ", "ฺฏูุฒู", "ุฑุฏ", "ฺฏุงุฏ", "ฺฏุงุฏ", "ูุงุญุดู", "ูุงูุดู", "ุฌูุฏู ูพูู", "ฺฉุณ ฺฉุด", "ุฌุง ฺฉุด", "ฺฉู ู", "ูุงุฏุฑ ุณฺฏ", "ุชุฎู ุณฺฏ"]
warning_texts = ["ุง ุจุงุจุงุ ุงุฏุจ ุฑู ุฑุนุงุช ฺฉู", "ุนู ุ ุจ ุงุฏุจ ูฺฉูุฏ", "ูุทูุง ุจู ูู ุฏฺฏู ุงุญุชุฑุงู ุจุฒุงุฑู", "ูุทูุง ุงุญุชุฑุงู ฺฉุฏฺฏุฑ ุฑู ุฑุนุงุช ฺฉูุฏ", "ุงูู! ุ ููุฏุจ ุจุงุดู"]
    

JOKES= [
    "ุฌูุฑุฑุฑ ๏บ๏ปญ๏ปฃ๏บช ๏บ๏บฏ ๏ปซ๏ปฎ๏บ๏ญ๏ฏฟ๏ปค๏บ ๏ญ๏ฏฟ๏บ๏บฉ๏ปฉ ๏บท๏ปช ูู ๏บท๏ป๏ปฎ๏บ๏บญ๏บต ๏บ๏ป๏บ๏บ๏บฉ \n๏บฉ๏บ๏บฉ ๏บฏ๏บฉ : \n๏บฃ๏บ๏ปป ๏บ๏ปญ๏ปฅ  ฺฏู๏บง๏บ๏ปง๏ปฎ๏ปฃ๏ฏฝ ๏ฎ๏ปช ๏ฎ๏ป๏บ\n๏ฎ๏ปค๏บฎ๏บ๏ปจ๏บช๏บ ๏บญ๏ปญ ๏บ๏บ๏บฏ ๏ฎ๏ปจ๏ฏฟ๏บช ๏บ๏ฏฟ๏บ๏บฉ ๏บ๏ปฎ๏บ๏บ ๏บ๏บช๏ปฉ ",
    "nุงุฑู ุฏุงุฎู ููุงูพูุง ูุฑู ุฏุงุฎู ฺฉุงุจู ุฎูุจุงู ุจุง ุชูุฏุฏ ูฺฏู ุจุฑู ูุฑุงูฺฉููุฑุช.\nุฎูุจุงู ู ูฺฏุงูุด ุจูุด ูฺฉูู ูฺฏู ูพุณ ุงุณูุญู ุงุช ฺฉูุุ\nุงุฑู ูฺฏู ุฑูุงูุช ุจุฑู ุฏฺฏู ุญุชูุง ุจุงุฏ ุฒูุฑ ุจุงูุง ุณุฑุชูู ุจุงุดู",
    "ุฌุนูุฑ ุชู ุงุชูุจูุณ ู ฺฉุดุฏู ฺฏุฐุงุดุช ุชู ฺฏูุด ุจุบู ุฏุณุชุด ๐ค\n\nุงุฑู ููฺฏู:ฺุฑุง ูุฒู ูู ฺฉู ฺุฒ ูฺฏูุชู\n\nุฌุนูุฑ ููฺฏู: ูุณุฑุทููุงูู ฺฏูุชู ู ูููุน ฺฏูู ุฒุงุฏ ูุฎูุฑู!",
    "ุจุง ุดููุงุฑฺฉ ูุฑ ุชู ุขุณุงูุณูุฑ ุนฺฉุณ ูฺฏุฑ ููฺฉุดู ูุฒู ุฏุจ\n\nูพุดุช ุณุฑุชู ูฺฏุงู ฺฉู ููุดุชู ุงุณุชู ุงูุจุฑุฒ ๐\n\nุฏุฑ ุขุณุงูุณูุฑ ุจุฒูู ุชู ฺฉูุฑุช ููุนูู",
    "ูุฑ ููุช ุงุญุณุงุณ ุชููุง ฺฉุฑุฏ ...\nูพุงุดู ูู ูููู ุชุฑุณูุงฺฉ ุจุฒุงุฑ ูฺฏุงู ฺฉู !!!\nุจุนุฏ ูฺฉุฑ ููฺฉูู ูฺฉู ุชู ุงุชุงููุ ูฺฉ ุชู ุขุดูพุฒ ุฎููู ูุณุชุ ฺูุฏ ููุฑ ูู ุชู ุญูุงุทู !!!\nุฎูุงุตู ุงุฒ ุชููุง ุฏุฑ ููุง ๐",
    "ุฏุงุฑููุง ููุช ูุฎูุงู ุญุงู ฺฉ ุฑู ุฎูุจ ฺฉูู ุ ููุดู ุจู ุดุงู ูฺฏู: ูุง ูุญุงุตุฑูโุงุด ูฺฉูู ุชู ุงุฒ ุฏุฑ ูพุดุช ูุงุฑุฏ ุดู",
    "ุฏุดุจ ุจู ูุงูุฒุฏู ูฺฏู ุณุฑู ฺฏุฌ ูุฑู ููู ฺู ุฏู ุชุง ู ุจูู\nูฺฏู ููู ุฏูุชุง ูุจู ุ \nูฺฏู ุงุฑู !\nูฺฏู ุฎุจ ฺฉุฏููููู ุฎูุดฺฏูุชุฑู ุ",
    "ุงุฒ ูุธุฑ ุฑุงููุฏู ูุง ุนุงุจุฑุงู ูพูุงุฏู ูู ูุดุช ฺฏูุณููุฏู\n\n\nุงุฒ ูุธุฑ ุนุงุจุฑุงู ูพูุงุฏู ุฑุงููุฏู ูุง ูู ูุดุช ฺฏุงูู ุฎูุงุตู ุฎูุงุจูู ููุณุช ูู ุฏุงูุฏุงุฑูู",
    "ุฏุฎุชุฑู ุนฺฉุณุดู ุจุง ุณฺฏุด ฺฏุฐุงุดุช ุงูุณุชุง ๐ฉ๐\nูพุณุฑู ุจุง ุฎูุฏู ูฺฏู ฺฉุฏููุ ๐\nุฏุฎุชุฑู ฺฏูุช ุงูู ฺฉู ุชูุฑู ุจุบู ฺฉุฑุฏู ๐\nู ุจุฑุง ุงููู ุจุงุฑ ูพุณุฑ ุฏุฑ ุฏูุง ูุฌุงุฒุ ุฏุฎุชุฑ ุฑุง ุจูุงฺฉ ฺฉุฑุฏ\n\nู ุจุฑุง ุงููู ุจุงุฑ ูพุณุฑ ุฏุฑ ุฏูุง ูุฌุงุฒุ ุฏุฎุชุฑ ุฑุง ุจูุงฺฉ ฺฉุฑุฏ",
    "ุงู ูพุฑูุฑุฏุง ุจุงูุง ุตุฏุณุงู ฺฉู ุตุฏุงุณูุง ูุฑู ุจุงูุงุดูู ูุตุงุญุจู ูฺฉูู ู ููพุฑุณู ุฑุงุฒ ุณูุงูุชุชูู ฺู ู ุงููุงู ูฺฏู ูพุงุฏู ุฑู ู ูุตุฑู ูุจูุงุช.\nุฏุฑูุบ ูฺฏู ููุดูู ุชุฑุงฺฉ ูฺฉุดู.",
    "ุญู ููู ูุฑู ูุฑุงุณู ุฎุชู ุฒู ุฏูุณุชุด...\nูุฎูุงุฏ ุจุง ุฏูุณุชุด ุงุธูุงุฑ ููุฏุฑุฏ ฺฉูู... ููุฏููู ฺ ุจฺฏู\nูฺฏู:\nุฎุฏุง ุจุงูุฑุฒุฏุดุ ุฒู ุชู ูุจูุฏ! ุฒู ููููู ุจูุฏ!",
    "ูุฏุฑุณู ุบูุท ฺฉุฑุฏู...\nฺุณุชุ!!!!\nูพุงุณุฎ ููุทู ูุงูุฏู ุจู ุฏุงูุด ุขููุฒุงู ุฏุฑ ููุงุฌู ุจุง ุชูุงุถุง ูพูู ุจุฑุง ูุฏุฑุณู\nุฏูู ุดุตุช ูุง ูุฏููู ฺ ูฺฏู",
    "ููุช ูพุณุฑ ู ุฏุฎุชุฑ ุจุงูู ุจุฑูู ูุฑู:\n-ุงู ุฏุฎุชุฑู ฺฉู ุฑุฏ ุดุฏ ุฎูุดฺฏูุชุฑ ุจูุฏ ุง ููุ\n+ุงูู (ุจุงุฎุช!ูพุงุณุฎ ุงุดุชุจุงู)\n+ุชู (ุจุงุฎุช!ูพุงุณุฎ ุงุดุชุจุงู)\n+ฺฉุฏูู ุฏุฎุชุฑูุุูู ฺฉู ูุฏุฏูุด(ูพุงุณุฎ ุตุญุญ)",
    "ุนู ุดูุง ุจุฑ ุนุทุงุฑ ุจฺฏ ุฏูุณุช ูพุณุฑ ูุฏุงุฑู\nูู ุจุงุฒ ู ฺฏุงู ุจูุช ูุฏู ูฺฏู ุงูู ุฏู ฺฉู ุจุฎูุฑ....\nุญู ูุดู",
    "ุฌูููู : ุนุฒุฒู ุฏฺฉุชุฑ ุจูู ฺฏูุช ูุงุณู ุงูฺฉู ุญุงูู ุฎูุจ ุจุดู ุจุงุฏ ุจุฑู ุจู ุณูุฑ ุฎุงุฑุฌ ุจู ู ุณุงุญู ุขูุชุงุจ\nุญุงูุง ููู ฺฉุฌุง ูุจุฑุ\nุญู ููู: ู ุฏฺฉุชุฑ ุฏฺฏู!",
    "ุจุงุฏูุณุช ุฏุฎุชุฑู ุชุตูุฑ ุตุญุจุช ูููุฑุฏู ฺฏู ููุฎูุงู ุจุงูุงุช ฺูุฒูู ุชุฌุฑุจู ููู ูู ุจุง ููุดู ุชุฌุฑุจู ููุฑุฏู\nฺฏูุดูู ฺฏุฐุงุดุช ุชู ูุฎฺุงู ฺฏูุช ุฏุฑู ููุจูุฏู\nุจฺฏู ูุงูุนุง ฺุฑุงุบ ุฎุงููุด ููุดู ูุงูู",
    "ุฏุฎุชุฑุง :\nุงูุฑูุฒ ู ููุฑ ุจูู ุฏุงุฑฺฉุช ุฏุงุฏ ฺฏูุช ุฑูุช ฺฉุฑุงุด ุฏุงุฑู \nุฏูุณุชุด : ุงุฒ ุจุณ ุฏูุจุฑ ุฏฺฏู\nูพุณุฑุง :\nููุฏ ุงูุฑูุฒ ู ุฏุฎุชุฑ ุจูู ุฏุงุฑฺฉุช ุฏุงุฏ ฺฏูุช ุฑูุช ฺฉุฑุงุด ุฏุงุฑู\nููุฏ : ูู ุจูุฏู",
    "ุทุฑู ุงุฒ ู ฺุง ฺฉุณู ุง ท ุชุง ฺุง ูฺฏุฑู\nุจุนุฏ ุงููุฏู ูฺฏู ฺุฌูุฑ ูุฑ ุชู ุขู ูุจุงุณ ูุฎุฑ\nูุฑฺุฒ ุจูุฌููู ุฑู ุฏุณุชุดูู ููููู ุขู ูุฒููโ\nูฺฉุดูููย ุงูุฑุฌูุงู",
    "ุจุง ู ุฏุฎุชุฑ ุขุดูุง ุดุฏู\nููุด ูฺฏูุช ุงุฒ ูพุณุฑูุง ูุฑุฒุดฺฉุงุฑ ุฎู ุฎูุดู ูุงุฏ\nุฏูุนู ุงูู ุจุงย ุฏูุจูุฏู ฺฉูุดุชย ุฑูุชู\nุณุฑ ูุฑุงุฑ ููู ฺฉู ุฏุฏ ุฏุฑ ุฑูุช\nูฺฉุฑโ ฺฉูู ููุชุจุงู ุจูุฏ ๐ค",
    "ุญู ููู ฺฏุฑุฏู ฺฉ ุงุฒ ูุณุฆููู  ุงุฎุชูุงุณ ฺฏุฑ ุฑู ุจูุณุฏ ...\nูุณุฆููู ฺฏูุช : ููู ุฏุณุช ูุงุฑู ู ุจูุณูุฏ ุชู ฺุฑุง ฺฏุฑุฏู ูุงุฑู ู ุจูุณ ุ\nุญู ููู ฺฏูุช : ุฌุง ุดูุดุฑ ุงูุงู ุฒูุงูู ูุจูุณู",
    "ุฏุงุดุชู ูุฏุฑฺฉ ุชุญุตู ุชู ุงุฑุงู ุนู ุดูุฑุช ููููู โฆ\nุฏุงุดุชูุด ููุฑ ูุณุช ูู ูุจูุฏูุด ุนุจู",
    "ุบุถููุฑ ุฑูุช ุฏุณุชุดู\nฺฉ ุฏุงุฏ ุฒุฏ ุงุจ ุฏุงุฑู ูุทุน ูุดู\nุบุถููุฑ ููู ุดุฏ ุงูู ฺฉูููุดู ุดุณุช ุจุนุฏ ุฑููุฏ",
    "ุฏุฎุชุฑุง ุฎุงุฑุฌ ุจุง ูฺฏุงูุ ูุดูู ูุฏู ฺฉู ุนุงุดูุช ุดุฏู\nูู ุฏุฎุชุฑุง ุงุฑุงู ฺูุงู ูฺฏุงุช ูฺฉูู ู ุฏุฑ ฺฏูุด ูู ูพฺ ูพฺ ูฺฉูู\nฺฉู ูููููุุฎูุดฺฉู ุุฎูุดุชูพ ุ ุฎุดุชฺฉุช ูพุงุฑุณุ ุฒูพุช ุจุงุฒู ุง ุนุงุดูุช ุดุฏู...!",
    "ูุงูุงู ุจุงุจุงู ุฏุดุจ ููุฑ ฺฉุฑุฏูุ ุจุงุจุงู ุตุจุญ ุงููุฏ ุขุดุช ฺฉูู ฺฏูุช: \nุฎุงููู ู ุตุจุญููู ุจู ูุง ููุฏุ \nูุงูุงูู ฺฏูุช: \nูฺฏู ูู ููฺฉุฑุชูุ \nุฏูุจุงุฑู ู ุฏุนูุง ุดุฑูุน ุดุฏ",
    "ุฑูุชู ุฎูุงุณุชฺฏุงุฑ ูพุฏุฑ ุฏุฎุชุฑู ฺฏูุช: ุงุฒ ูุถุนุช ูุงูุช ุจฺฏู\n\nฺฏูุชู ุจุฑุงู ุงุตูุง ูพูู ููู ูุณุช\n\nุจุง ูุจุงุณ ุณูุฏ ูุงู ุฎููุชูู ุจุง ูุจุงุณ ุณูุฏู ูุฑู\nุจุง ููู ุงูุชุงุฏู ุฏูุจุงูู ุจุดูุฑุง",
    "ููู ุณููพุฑู ุฏุฎุชุฑู ุฎูุงุจ ุจูุฏ ุทุฑู ุงููุฏ ุณุฑ ุงูู ฺฉุฑุฏ ู ุชููู ุดุฏ ุฏุฎุชุฑู ูููุฒ ุจุฏุงุฑ ูุดุฏู ุจูุฏ \nุฎุจ ฺฉุตฺฉุด ุฒูฺฏ ุจุฒู ุงูุฑฺุงูุณ ุดุงุฏ ูุฑุฏู ุจุงุดู",
    "ููุฑุฏ ุฏุงุดุชู ุฏุฎุชุฑู ุจูุฏ ูุจูุฏู ุฏุฑ ูพูุฑุดู ุฑู ูุง ฺฉูู ุจุงุฏ ุจุฑูู!!!\nุชู ุฑูุฏุฑูุงุณ ฺฏุฑ ฺฉุฑุฏู ุจุง ูพุณุฑู ุฑูุชู ุดูุงู",
    "ุฏุณุช ู ูุงุจูุงุฑู ฺฏุฑูุชู ุจุฑุฏูุด ูุณุท ุฎุงุจูู ุฏูุจุงุฑู ุจุฑุด ฺฏุฑุฏููุฏู ุณุฑุฌุงุด\nุนูฺฉุดู ุฏุฑุขูุฑุฏ ุชูโฺุดุงู ูฺฏุงู ฺฉุฑุฏ ฺฏูุช: ุชู ฺฉุตฺฉุด ุชุฑ ุง ููุ",
    "ุตุงุจ ฺฉุงุฑู ฺฏูุชู ุจูุฏ ุจุฑุง ุงูฺฉู ุฎูุจ ุจูุฑูุดู \nุชฺฉู ฺฉูุงูุช ุฎูุฏู ุชุณุช ฺฉุฑุฏูุ ุนุงูู ุจุงุดู. \nุฒูู ุงููุฏ ุชู ูุบุงุฒู ูพุฑุณุฏ ุขูุง ุงูุง ฺฉูุชุด ุฎูุจูุ ูุฏุฏ ฺฏูุชู ุฎูุฏู ุชุณุช ฺฉุฑุฏู ุนุงูู. \n\nุณุฑูู ุจููุฏ ฺฉุฑุฏู ุฏุฏู ููุงุฑ ุจูุฏุงุดุช ุฑู ฺฏุฑูุชู ุฏุณุชุด",
    "ูููุฑุงุฏ ูุฑู ุฌุจูู ุจุนุฏ ุงุฒ 2 ุฑูุฒ ุจุฑู ฺฏุฑุฏู. ูฺฏู ฺ ุดุฏ ุงููุฏุฑ ุฒูุฏ ุจุฑฺฏุดุชุ\nูฺฏู: ุจุงุจุง ุงููุฌุง ุจู ูุตุฏ ฺฉุดุช ุชููฺฏ ุจุงุฒ ู ฺฉูู",
    "ุชู ุชุงฺฉุณ ุฒูู ุชููู ุจุง ุดููุฑุด ุฏุนูุงุด ุดุฏุ\nฺฏูุดู ฺฉู ูุทุน ฺฉุฑุฏ ฺฏูุช ูุฑุฏุง ููู ุขุดุบุงููุ \nุฑุงููุฏู ุฒุฏ ุจุบู ฺฏูุช ุงุฒ ุณุทู ุขุดุบุงู ูู ูพุงุฏู ุดู",
    "ุฏุฎุชุฑู ููุฎูุงุณุช ุฏูุณ ูพุณุฑุดู ุจูุณ ฺฉููุ\nูพุณุฑู ฺฏูุช ูุณู ููุฎูุฑู ฺฉู ูู ุงูููู ูพุณุฑู ุงู ฺฉู ุจูุณ ููฺฉูู! \nุฏุฎุชุฑู ููฺฏู ุขุฑู ุจุฎุฏุง ฺุฑุง ููุชูู ุงููู ูููพุฑุณูู",
    "ุชู ู ุฌูุน ฺฉ ุจูู ฺฏูุช ู ฺฉุณ ุจฺฏู ุจุฎูุฏู.\nููู ฺฏูุชู ฺฉุณ ููุช(: \nุชุง ุดุนุงุนู 50 ูุชุฑ ููู ุฎูุฏุฏู ุบุฑ ุฎูุฏุด \nฺฉุณฺฉุด ูฺฉ ฺฉุฑุฏู ูู ุฏููฺฉู",
    "๏บฉ๏ฎ๏บ๏บฎ ๏ฎ๏ป๏บ ๏ญผ๏บฎ๏บ ๏บณ๏ฏฟ๏ฎ๏บ๏บญ ๏ปฃ๏ฏฟ๏ฎ๏บธ๏ฏฝุุุ\n ๏บฉ๏บญ๏บฉ๏ปซ๏บ๏ฏพ๏ปข ๏บญ๏บ ๏ฎ๏ปช ๏บท๏ปจ๏ฏฟ๏บช ๏บ๏บ ๏ฎ๏ปค๏ฏฝ ๏บ๏บ๏ปฃ๏ป ๏ฎ๏ป๏บ ๏บ๏บฎ๏ฏพ๏บ๏ฎ ๏บ๏ฎ๏บถ ุจุฏุจุฎุช\n ุฑุฏู ุชู ุงู ุฒูุฏฺฏุช",
    "ุงุฒ ุฏุงุนุดู ูููพุฑุณู : ฺุฑุง ุจุง ุงูุฑุงูุง ูู ุฌูฺฏุฏุ\nูฺฏู : ุงูุง ูู ููููุฏู ุฏุงุดุชู ... ูพุฑุฏ ุฒูุฑ ุชุงูฺฉ !\nูุงู ุจู ุญุงู ููููุงุดูู",
    "ููุดุชู ุงฺฏู ุฏุณุชุช ุฑู ูุญฺฉู ฺฏุฑูุช ุนู ุฏูุณุชุช ุฏุงุฑู\nูพุณ ฺุฑุง ูู ุงูู ุณุฑ ูุงููุฑ ฺฏุงู ุฏุณุชูู ูุญฺฉู ฺฏุฑูุชู ุจูุฏ ุจูุด ฺฏูุชู ููู ุฏูุณุชุช ุฏุงุฑู ุนุดููุ ุงุณูพุฑ ูููู ุฒุฏ ุชู ุตูุฑุชู",
    "ุฎุฏุง ุจุงูุฑุฒ ุจุงุจุงุจุฒุฑฺฏู ูฺฏูุช ููุช ุนุงููุงุฑ ุจุด ุจุงุฏ ูููโุด ุฏุฑ ุจุงุฑ ุจุฏ ุฒู ู ุจฺูโุช ุจุฎูุฑู \nฺฏูุชู ุขูุงุฌูู ุฒู ุญุงูุง ู ฺุฒ ูู ุจฺู ุฒุดุชู ูุงููุณุง\n ุงููุฌุง ุจูุฏ ฺฉู ุณฺฉุชู ุฏูู ุฑู ุฒุฏ"
]




async def generate_image_prompt(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text
    if not text.startswith('/ูพุฑุงููพุช'):
        return

    prompt_text = text[len('/ูพุฑุงููพุช'):].strip()
    if not prompt_text:
        await update.message.reply_text("ูุทูุง ุจุนุฏ ุงุฒ /ูพุฑุงููพุช ููุถูุน ุนฺฉุณ ุฑุง ูุงุฑุฏ ฺฉูุฏ.")
        return

    await update.message.reply_text("ุฏุฑ ุญุงู ุณุงุฎุช ุชุตูุฑ... ูุทูุง ุตุจุฑ ฺฉูุฏ.")

    # ููููู URL ูุฑุถ API Polinations:
    api_url = f"https://image.pollinations.ai/prompt/{prompt_text}"

    try:
        async with aiohttp.ClientSession() as session:
            async with session.get(api_url) as resp:
                if resp.status == 200:
                    img_bytes = await resp.read()
                    bio = BytesIO(img_bytes)
                    bio.name = "image.png"
                    bio.seek(0)
                    await update.message.reply_photo(photo=InputFile(bio))
                else:
                    await update.message.reply_text("ูุชุฃุณูุงูู ุชุตูุฑ ุณุงุฎุชู ูุดุฏ. ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.")
    except Exception as e:
        await update.message.reply_text(f"ุฎุทุง ุฏุฑ ุณุงุฎุช ุชุตูุฑ: {e}")




async def joke_reply(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text.strip().lower()
    triggers = [
        "ู ุฌูฺฉ ุจฺฏู",
        "ุฌูฺฉ ุจฺฏู",
        "ุฌูฺฉ",
        "ู ุฌูฺฉ",
        "ุฌูฺฉ ุฌุฏุฏ",
        "ฺฉ ุฌูฺฉ ุจฺฏู",
        "ุฌูฺฉ ุฏุงุฑุ"
    ]
    if any(trigger == text for trigger in triggers):
        joke = random.choice(JOKES)
        await update.message.reply_text(joke)











async def welcome(update: Update, context: ContextTypes.DEFAULT_TYPE):
    chat = update.effective_chat
    group_name = chat.title if chat.title else "ฺฏุฑูู"
    for new_user in update.message.new_chat_members:
        name = new_user.first_name
        await update.message.reply_text(f"{name} \nุจู {group_name} ุฎูุด ุงููุฏ! ูุฑ ฺฉุงุฑ ุฏุงุดุช ุจฺฏู")


async def filter_bad_words(update: Update, context: ContextTypes.DEFAULT_TYPE):
    message_text = update.message.text.lower() 

    for bad_word in BAD_WORDS:
        if bad_word in message_text:
            try:
                await update.message.delete()
                print(f"ูพุงู ุญุงู ฺฉููู ูุงููุงุณุจ ุญุฐู ุดุฏ: {bad_word}")

                # ุงูุชุฎุงุจ ูพุงู ุฑูุฏูู
                warning_msg_text = random.choice(warning_texts)
                
                warning_msg = await update.effective_chat.send_message(warning_msg_text)
                
                await asyncio.sleep(3)
                
                await warning_msg.delete()
            except Exception as e:
                print(f"ุฎุทุง ุฏุฑ ุญุฐู ูพุงู ุง ุงุฑุณุงู ุชุฐฺฉุฑ: {e}")
            break


async def report_reply(update: Update, context: ContextTypes.DEFAULT_TYPE):
    if update.message.text == "ฺฏุฒุงุฑุด":
        await update.message.reply_text("โ ฺฏุฒุงุฑุด ุดูุง ุซุจุช ุดุฏ #ฺฏุฒุงุฑุด")

async def send_group_link(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text.lower()
    if "ููฺฉ" in text:
        chat = update.effective_chat
        try:
            # ฺฏุฑูุชู ููฺฉ ฺฏุฑูู (ุฑุจุงุช ุจุงุฏ ุงุฏูู ุจุงุดู ู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดู)
            invite_link = await context.bot.export_chat_invite_link(chat.id)
            await update.message.reply_text(f"ููฺฉ ฺฏุฑูู โ\n{invite_link}")
        except Exception as e:
            await update.message.reply_text("ูุชุฃุณูุงูู ููโุชูุงูู ููฺฉ ฺฏุฑูู ุฑุง ุงุฑุณุงู ฺฉูู. ูุทูุงู ูุทูุฆู ุดูุฏ ุฑุจุงุช ุงุฏูู ุงุณุช.")
            print(f"ุฎุทุง ุฏุฑ ฺฏุฑูุชู ููฺฉ ฺฏุฑูู: {e}")

async def main():
    TOKEN = '7933239688:AAE88fA5gzZxj_wTK1_QQR0pxt4ODSQdPw8' 

    app = ApplicationBuilder().token(TOKEN).build()

    # ููุฏูุฑ ุนุถู ุฌุฏุฏ
    app.add_handler(MessageHandler(filters.StatusUpdate.NEW_CHAT_MEMBERS, welcome))

    app.add_handler(MessageHandler(filters.TEXT & filters.ChatType.PRIVATE & filters.Regex(r'^/ูพุฑุงููพุช'), generate_image_prompt))
    app.add_handler(MessageHandler(filters.TEXT & filters.ChatType.GROUPS & filters.Regex(r'^/ูพุฑุงููพุช'), generate_image_prompt))

    app.add_handler(MessageHandler(filters.TEXT & filters.ChatType.GROUPS, fall_reply))



    # ููุฏูุฑ ูพุงุณุฎ ุจู ฺฏุฒุงุฑุด
    app.add_handler(MessageHandler(filters.TEXT & filters.ChatType.GROUPS & filters.Regex(r'^ฺฏุฒุงุฑุด$'), report_reply))
    app.add_handler(MessageHandler(filters.TEXT & filters.ChatType.GROUPS & filters.Regex(r'^ู ุฌูฺฉ ุจฺฏู$'), joke_reply))

    # ููุฏูุฑ ุงุฑุณุงู ููฺฉ ฺฏุฑูู (ุจุงุฏ ูุจู ุงุฒ ููุชุฑ ฺฉููุงุช ุจุงุดู)
    app.add_handler(MessageHandler(filters.TEXT & filters.ChatType.GROUPS & filters.Regex(r'^(ููฺฉ|ููฺฉ ฺฏุฑููู)$'), send_group_link))

    # ููุฏูุฑ ููุชุฑ ฺฉููุงุช ูุงููุงุณุจ
    app.add_handler(MessageHandler(filters.TEXT & filters.ChatType.GROUPS, filter_bad_words))

    print("ุฑุจุงุช ุฏุฑ ุญุงู ุงุฌุฑุงุณุช...")
    await app.initialize()
    await app.start()
    await app.updater.start_polling()

    await asyncio.Event().wait()

if __name__ == '__main__':
    try:
        loop = asyncio.get_event_loop()

        loop.run_until_complete(main())
    except RuntimeError as e:
        print(f"ุฎุทุง ุฏุฑ ุงุฌุฑุง ุฑุจุงุช: {e}")
